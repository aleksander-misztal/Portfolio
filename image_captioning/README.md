
# Image Captioning with BLIP Model

## Overview

This project demonstrates an image captioning API built using Flask and the BLIP (Bootstrapping Language-Image Pretraining) model for generating captions for images. It uses TensorFlow and the BLIP model to process images, generate captions, and expose the functionality through a RESTful API. The project is containerized using Docker to simplify deployment.

## Features

- **Image Caption Generation**: The core functionality of this project is generating descriptive captions for images. The captions are generated by a pre-trained BLIP model.
- **Flask-based API**: The project exposes an API that allows you to generate captions for images by either uploading an image file or providing an image URL.
- **Dockerized Application**: The project is containerized using Docker, which ensures portability and easy deployment across different environments.
- **Error Handling & Logging**: Comprehensive logging and error handling to capture potential issues during image downloading, processing, and caption generation.

## Technologies Used

- **Flask**: A lightweight Python web framework used to expose the image captioning functionality as an API.
- **TensorFlow**: Used for handling the deep learning model for caption generation.
- **BLIP Model**: A state-of-the-art image captioning model used to generate captions for the given image.
- **Docker**: To containerize the application and facilitate easy deployment and scalability.
- **Logging**: Captures application logs for monitoring and debugging purposes.

## API Endpoints

### 1. `/generate_caption` (POST)

Generates a caption for an image provided via URL.

#### Request Body
```json
{
  "image_url": "http://example.com/path/to/image.jpg"
}
```

#### Response
```json
{
  "caption": "A description of the image.",
  "filename": "1678901234_abcd1234.jpg"
}
```

#### Response Codes
- **200 OK**: Successfully generated caption.
- **400 Bad Request**: Missing or invalid `image_url` in the request.
- **500 Internal Server Error**: Error downloading or processing the image.

### 2. `/` (GET)

Test route to check if the server is up and running.

#### Response
```json
{
  "res": "test"
}
```

## Setup Instructions

### Requirements

- Docker (for containerized setup)
- Python 3.10 (for local development)
- Docker Compose (if using the docker-compose setup)

### Installation Steps

#### Using Docker

1. Clone the repository:
    ```bash
    git clone <repository-url>
    cd <repository-directory>
    ```

2. Build and run the Docker container:
    ```bash
    docker-compose up --build
    ```

3. The application will be available at `http://localhost:5001`.

#### Using Python (Local Development)

1. Create a virtual environment:
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # On Windows: venv\Scriptsctivate
    ```

2. Install dependencies:
    ```bash
    pip install -r requirements.txt
    ```

3. Run the Flask app:
    ```bash
    python app.py
    ```

4. The application will be available at `http://localhost:5000`.

## Configuration

- **UPLOAD_FOLDER**: Set the path to the folder where images will be saved before processing.
- **ALLOWED_EXTENSIONS**: List of allowed file extensions for images. (e.g., `["jpg", "jpeg", "png"]`)
- **IMAGE_SIZE**: Size to which images will be resized for processing before passing to the model (e.g., `(224, 224)`).

## Logging

Logs are written to `app.log` file, with logging levels set to `WARNING`. The logs will capture key actions such as API requests, image processing, and errors.

## Example Usage

To generate a caption for an image, you can make a POST request to `/generate_caption` with a JSON body like this:

```json
{
  "image_url": "https://example.com/path/to/image.jpg"
}
```

The response will include the generated caption and the filename of the saved image:

```json
{
  "caption": "A dog sitting on the grass",
  "filename": "1678901234_abcd1234.jpg"
}
```
